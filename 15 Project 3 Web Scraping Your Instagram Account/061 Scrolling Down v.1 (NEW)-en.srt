1
00:00:00,450 --> 00:00:02,060
Hello everyone.

2
00:00:02,220 --> 00:00:09,870
So in the previous video, we discussed how to open

3
00:00:02,220 --> 00:00:09,870
our target profile. In this video, we are going to discuss how

4
00:00:09,870 --> 00:00:16,950
we're going to actually download images from

5
00:00:09,870 --> 00:00:16,950
my target's profile and what is the logic we are going to use

6
00:00:16,950 --> 00:00:17,870
behind it.

7
00:00:18,660 --> 00:00:25,080
So the first thing is that I'm opening

8
00:00:18,660 --> 00:00:25,080
this National Geographic Channel here, National

9
00:00:25,080 --> 00:00:31,390
Geographic's profile and I have it open and you can

10
00:00:25,080 --> 00:00:31,390
see that it says 15,482 posts.

11
00:00:31,440 --> 00:00:40,310
OK, so now the thing is that I clicked

12
00:00:31,440 --> 00:00:40,310
on refresh and the page almost instantly

13
00:00:40,310 --> 00:00:41,180
reloaded.

14
00:00:41,240 --> 00:00:42,670
It didn't take a lot of time.

15
00:00:43,620 --> 00:00:45,820
So what do you think.

16
00:00:45,890 --> 00:00:54,180
If I was actually loading 15000 photos at once on

17
00:00:45,890 --> 00:00:54,180
this web page it wouldn't be taking you like a second

18
00:00:54,180 --> 00:00:54,600
to load.

19
00:00:54,600 --> 00:01:02,460
It would take maybe a minute or two minutes

20
00:00:54,600 --> 00:01:02,460
depending on the network speed and it would also be really

21
00:01:02,490 --> 00:01:09,070
very burdensome for National Geographic to

22
00:01:02,490 --> 00:01:09,070
actually make this happen that each time you open

23
00:01:09,330 --> 00:01:17,040
a profile you load all the images that person has.

24
00:01:09,330 --> 00:01:17,040
Now as I've opened National Geographic obviously I don't

25
00:01:17,040 --> 00:01:21,480
want to see 15000 images at once. It does one make sense.

26
00:01:21,480 --> 00:01:27,930
So what they do is they load a few images and

27
00:01:21,480 --> 00:01:27,930
if you want to see more images from National

28
00:01:27,930 --> 00:01:33,360
Geographic. What do you do is you scroll down.

29
00:01:27,930 --> 00:01:33,360
You can see as I scroll down more images load, you can

30
00:01:33,360 --> 00:01:38,440
see there's a circle here and it loads more images.

31
00:01:38,490 --> 00:01:42,640
So as it keeps scrolling down, it keeps loading photos.

32
00:01:42,720 --> 00:01:43,590
OK.

33
00:01:43,890 --> 00:01:51,870
Now the thing here is that I don't know

34
00:01:43,890 --> 00:01:51,870
how many times I have to scroll down before

35
00:01:51,870 --> 00:01:56,120
actually all the photos are loaded.

36
00:01:56,190 --> 00:02:00,930
That is very essential for us to know because

37
00:01:56,190 --> 00:02:00,930
obviously we want to you know download all the

38
00:02:00,930 --> 00:02:07,530
images for the given profile and we can't do

39
00:02:00,930 --> 00:02:07,530
that unless we know how many times we have to scroll down.

40
00:02:07,530 --> 00:02:14,250
If I say I have that for a thousand it is very

41
00:02:07,530 --> 00:02:14,250
much possible that maybe not all the images are loaded

42
00:02:14,280 --> 00:02:22,320
if the images are a lot and it is also possible that

43
00:02:14,280 --> 00:02:22,320
a guy only had 50 images and for no reason I'm

44
00:02:22,340 --> 00:02:26,720
just scrolling down thousand times. It just wouldn't make sense.

45
00:02:27,000 --> 00:02:34,980
So how do we figure out the right number through which

46
00:02:27,000 --> 00:02:34,980
we're able to say "OK, this many

47
00:02:34,980 --> 00:02:37,720
times we have to scroll down."

48
00:02:38,100 --> 00:02:45,090
Now this was what I wanted to discuss with you in

49
00:02:38,100 --> 00:02:45,090
this video but before I get into that I just

50
00:02:45,090 --> 00:02:46,040
would like

51
00:02:46,080 --> 00:02:50,670
you to have an overview as to how

52
00:02:46,080 --> 00:02:50,670
we are going to download the images.

53
00:02:50,700 --> 00:02:57,550
So the idea is that once we have all the

54
00:02:50,700 --> 00:02:57,550
images loaded in this web page, in this document,

55
00:02:57,550 --> 00:03:02,780
what I'm going to do is I need to get all the images

56
00:03:02,940 --> 00:03:05,680
tags out of this page.

57
00:03:05,790 --> 00:03:11,600
And after that, you can see if I click on inspect here...

58
00:03:14,490 --> 00:03:16,240
Just give me a sec please.

59
00:03:16,400 --> 00:03:19,660
OK, so as soon as we click inspected here,

60
00:03:16,400 --> 00:03:19,660
you can see that this is a "div" and...

61
00:03:26,290 --> 00:03:27,570
Just stay with me.

62
00:03:32,840 --> 00:03:33,400
So

63
00:03:40,340 --> 00:03:44,680
as it moves down you can see

64
00:03:40,340 --> 00:03:44,680
that this "div" has this "image".

65
00:03:44,750 --> 00:03:52,690
So this "image" you can see that it has

66
00:03:52,860 --> 00:03:56,050
a source attribute here.

67
00:03:59,340 --> 00:04:03,080
OK, I have to cancel this.

68
00:04:03,100 --> 00:04:09,380
OK, so if I want the source tag what I do is. Sorry, this source attribute

69
00:04:09,390 --> 00:04:12,800
actually contains the link for this image.

70
00:04:12,840 --> 00:04:23,990
So if I have this, if I have the source and I open it

71
00:04:12,840 --> 00:04:23,990
and then the new tab. If I open this here,

72
00:04:24,380 --> 00:04:25,840
you see that I have this image here.

73
00:04:25,880 --> 00:04:27,020
Right.

74
00:04:27,020 --> 00:04:33,700
So the idea is to get all the source tags like

75
00:04:27,020 --> 00:04:33,700
the source attributes for all the image tags.

76
00:04:33,830 --> 00:04:39,800
And then once I have them, we can just download them.

77
00:04:33,830 --> 00:04:39,800
We can get the images then. That's the idea of

78
00:04:39,830 --> 00:04:41,090
this whole exercise.

79
00:04:41,090 --> 00:04:46,030
But before we get into that we need to understand the scrolling issue.

80
00:04:46,030 --> 00:04:55,130
Now I've told you why it's necessary to scroll

81
00:04:46,030 --> 00:04:55,130
down and how we're going to actually

82
00:04:55,130 --> 00:05:00,170
scrape the images once we've scrolled down to the very end of the page.

83
00:05:00,380 --> 00:05:03,610
The first thing we need to know is

84
00:05:00,380 --> 00:05:03,610
we need to know the number of posts.

85
00:05:03,680 --> 00:05:05,520
OK.

86
00:05:05,710 --> 00:05:08,670
And I'm going to open "datamining" right now.

87
00:05:08,720 --> 00:05:10,740
Because 15000 is a lot of posts.

88
00:05:10,760 --> 00:05:14,120
I wouldn't be able to open that many posts right now.

89
00:05:15,870 --> 00:05:18,480
So we have "dataminer" open now.

90
00:05:18,510 --> 00:05:21,720
Now, you can see "dataminer" has 30 posts in total.

91
00:05:21,720 --> 00:05:22,800
OK.

92
00:05:22,880 --> 00:05:27,010
So as soon as I open "dataminer", I'm going to refresh it.

93
00:05:27,010 --> 00:05:28,500
So you can see this in real time.

94
00:05:28,530 --> 00:05:34,860
OK, so you can see that as soon as I open up

95
00:05:28,530 --> 00:05:34,860
all of the posts have been loaded into the page.

96
00:05:34,890 --> 00:05:36,130
So how many are they.

97
00:05:36,150 --> 00:05:37,360
Let's count them.

98
00:05:37,830 --> 00:05:39,470
One, two, three, four.

99
00:05:39,510 --> 00:05:45,920
So there are four rows and each of them contains three images

100
00:05:39,510 --> 00:05:45,920
so in total 12 images had been loaded

101
00:05:45,960 --> 00:05:54,310
as soon as the profile page was displayed and

102
00:05:45,960 --> 00:05:54,310
as I scroll down more images are

103
00:05:54,330 --> 00:05:54,470
loaded.

104
00:05:54,480 --> 00:05:55,550
OK.

105
00:05:55,560 --> 00:05:59,820
One, two.

106
00:05:59,970 --> 00:06:06,230
So right now two rows loaded and I'm

107
00:05:59,970 --> 00:06:06,230
to refresh it right now and then we are going to see how many

108
00:06:06,230 --> 00:06:09,680
rows are loaded with each time I scroll down.

109
00:06:09,690 --> 00:06:11,190
OK.

110
00:06:11,310 --> 00:06:14,990
Now we know that three row are already there

111
00:06:15,000 --> 00:06:22,800
when you open someone's profile. One, two, three, four.

112
00:06:15,000 --> 00:06:22,800
Sorry, four rows and one, two,three,four and

113
00:06:22,800 --> 00:06:26,160
four rows are there. OK.

114
00:06:26,340 --> 00:06:33,380
When I scroll down, each time I scroll down, four

115
00:06:26,340 --> 00:06:33,380
rows they need to be fetched

116
00:06:33,390 --> 00:06:40,640
from the server and so if I have 30 posts,

117
00:06:33,390 --> 00:06:40,640
how many times I have to scroll down.

118
00:06:40,830 --> 00:06:44,980
That will mean that I would I have to scroll down know 30 - 12.

119
00:06:45,000 --> 00:06:46,690
That is 18.

120
00:06:46,950 --> 00:06:47,640
OK.

121
00:06:47,640 --> 00:06:55,680
Because the reason I'm subtracting 12 at first,

122
00:06:47,640 --> 00:06:55,680
here is that twelve have already been

123
00:06:55,680 --> 00:07:01,740
loaded into the page so I don't really need to add

124
00:06:55,680 --> 00:07:01,740
that 12 to number of times I have to scroll

125
00:07:01,740 --> 00:07:06,560
down so I subtract that and I have 18 posts.

126
00:07:06,690 --> 00:07:10,190
So each time I scroll down 12 posts are loaded.

127
00:07:10,260 --> 00:07:11,030
OK.

128
00:07:11,190 --> 00:07:13,640
So how many times do I have to scroll down.

129
00:07:13,650 --> 00:07:16,300
That is 18 divided by 12.

130
00:07:16,380 --> 00:07:18,100
And that would be two.

131
00:07:18,240 --> 00:07:24,740
Like once I go down and then only six photos

132
00:07:18,240 --> 00:07:24,740
would be left and then the time

133
00:07:24,740 --> 00:07:27,680
I scroll down, the other six photos are there then too.

134
00:07:27,980 --> 00:07:31,960
Let's see how many times I have to

135
00:07:27,980 --> 00:07:31,960
scroll down and if the little math

136
00:07:31,980 --> 00:07:32,490
we did

137
00:07:32,490 --> 00:07:33,710
is it OK or not.

138
00:07:34,880 --> 00:07:39,980
Oh, I'm sorry.

139
00:07:39,990 --> 00:07:40,950
So Instagram,

140
00:07:44,110 --> 00:07:46,260
dataminer, Ok.

141
00:07:46,340 --> 00:07:49,370
So this was once one,

142
00:07:53,230 --> 00:07:55,830
two and three.

143
00:07:55,870 --> 00:08:03,750
So the number we calculated was two and it was

144
00:07:55,870 --> 00:08:03,750
two because later we have 18 posts.

145
00:08:04,190 --> 00:08:08,400
And if we add the first 12 then it becomes three.

146
00:08:08,410 --> 00:08:11,760
So my calculation was correct essentially.

147
00:08:11,830 --> 00:08:17,110
OK, so before we actually do the scrolling part

148
00:08:11,830 --> 00:08:17,110
and see it in action we need to know the number

149
00:08:17,110 --> 00:08:19,310
of posts for any given profile.

150
00:08:19,580 --> 00:08:22,060
Now if an open National Geographic again

151
00:08:27,780 --> 00:08:32,940
you can see that this contains 15,483

152
00:08:33,040 --> 00:08:33,910
posts.

153
00:08:33,960 --> 00:08:34,520
OK.

154
00:08:35,820 --> 00:08:38,910
We're going to get this figure now.

155
00:08:39,120 --> 00:08:43,430
And you can see that this figure is in this "span" and its class

156
00:08:43,420 --> 00:08:45,690
is this which I'm just copying here.

157
00:08:47,720 --> 00:08:51,040
OK, so here's some code for scrolling down.

158
00:08:51,080 --> 00:08:51,640
OK.

159
00:08:51,840 --> 00:08:55,270
"no_of_posts" is equals to self.driver.find_element_by_xpath".

160
00:08:55,280 --> 00:08:58,880
It's the same "span" and it has the same class.

161
00:08:58,880 --> 00:09:04,700
And I say "no_of_posts" is equals to "no_of_posts.text".

162
00:09:04,700 --> 00:09:11,090
And then I'm saying print "no_of_posts". Now I'm

163
00:09:04,700 --> 00:09:11,090
going to run this and we're going to see if this works

164
00:09:11,090 --> 00:09:11,490
or not.

165
00:09:11,510 --> 00:09:12,060
OK.

166
00:09:15,030 --> 00:09:22,080
This should display us the number of post for our dataminer

167
00:09:15,030 --> 00:09:22,080
profile. I'm just going to have an "input" tag here

168
00:09:22,110 --> 00:09:25,740
to stop the execution of the program.

169
00:09:26,220 --> 00:09:31,730
"stop for now" and let me call

170
00:09:26,220 --> 00:09:31,730
this function now, "scroll_down".

171
00:09:31,980 --> 00:09:41,570
OK, I'm running this and let's see if we're able to

172
00:09:31,980 --> 00:09:41,570
extract the number 30 from dataminer's profile because

173
00:09:41,570 --> 00:09:43,580
that's the number of posts dataminer has.

174
00:10:04,650 --> 00:10:07,080
It's opening up.

175
00:10:07,250 --> 00:10:08,090
OK.

176
00:10:08,460 --> 00:10:13,050
So "scroll_down". Everything seems in order.

177
00:10:19,390 --> 00:10:29,730
That's logging in.

178
00:10:29,820 --> 00:10:35,380
It is gong to close the dialog box.

179
00:10:35,490 --> 00:10:36,900
It didn't close the dialog

180
00:10:36,920 --> 00:10:37,370
box.

181
00:10:44,210 --> 00:10:47,230
OK, let's see where we're getting this error.

182
00:10:48,570 --> 00:10:54,990
Because they apparently got an error here.

183
00:10:48,570 --> 00:10:54,990
OK, it was "open_target_profile".

184
00:10:55,040 --> 00:10:58,030
Before we get to that, it should have...

185
00:10:58,290 --> 00:11:00,400
OK, I'm just going to increase the sleep here.

186
00:11:00,410 --> 00:11:04,970
Maybe it wasn't able to find this button,

187
00:11:05,300 --> 00:11:10,930
this dialog button in this dialog box

188
00:11:05,300 --> 00:11:10,930
we have "Experience of best version of Instagram."

189
00:11:11,070 --> 00:11:16,040
And the reason might be because it just

190
00:11:11,070 --> 00:11:16,040
hadn't loaded into the page while it checked.

191
00:11:16,100 --> 00:11:16,380
That's it.

192
00:11:16,380 --> 00:11:23,850
Let's run this again with a greater delay and see if

193
00:11:16,380 --> 00:11:23,850
this works or not. Let me check my internet connection.

194
00:11:23,890 --> 00:11:27,870
It's good. Ok so Instagram

195
00:11:34,150 --> 00:11:37,720
and it's going to log us in.

196
00:11:37,720 --> 00:11:38,500
Good.

197
00:11:38,500 --> 00:11:42,080
It closes the settings tab and now it's opening the news feed.

198
00:11:42,450 --> 00:11:43,870
And now I have.

199
00:11:43,870 --> 00:11:44,160
OK.

200
00:11:44,170 --> 00:11:44,610
So great.

201
00:11:44,600 --> 00:11:45,100
It worked now.

202
00:11:45,090 --> 00:11:46,800
I increase the delay.

203
00:11:46,810 --> 00:11:52,030
There you can see that you're at dataminer's

204
00:11:46,810 --> 00:11:52,030
profile and we should have a number

205
00:11:52,030 --> 00:11:52,690
30 here.

206
00:11:52,800 --> 00:11:53,500
Great.

207
00:11:53,590 --> 00:12:00,030
So we have the number 30. Ok, so the thing here is

208
00:11:53,590 --> 00:12:00,030
that we should know down is that we have the number of

209
00:12:00,270 --> 00:12:05,200
posts 30 here but if you see National Geographic It contains

210
00:12:05,290 --> 00:12:07,580
15,483 posts.

211
00:12:07,870 --> 00:12:12,310
And you see a comma here after five.

212
00:12:12,790 --> 00:12:14,230
So how do we handle this.

213
00:12:14,230 --> 00:12:20,000
I mean I can convert this number to an

214
00:12:14,230 --> 00:12:20,000
integer without creating an exception.

215
00:12:20,050 --> 00:12:30,290
So the way I'm going to handle this is and we say

216
00:12:20,050 --> 00:12:30,290
"no_of_posts.replace" and if there is any comma

217
00:12:30,430 --> 00:12:31,760
I'm going to

218
00:12:31,760 --> 00:12:35,470
ask Python to replace that with nothing.

219
00:12:35,470 --> 00:12:37,710
So if there is a number

220
00:12:37,750 --> 00:12:46,450
15,483 this is going to convert it

221
00:12:37,750 --> 00:12:46,450
into 15483 it is just going

222
00:12:46,540 --> 00:12:48,110
to remove the comma.

223
00:12:50,640 --> 00:12:54,670
So essentially I'm going to have an integer.

224
00:12:54,670 --> 00:12:57,810
Now OK.

225
00:12:57,820 --> 00:13:03,100
So now I have the number of posts and

226
00:12:57,820 --> 00:13:03,100
it's working. Ok so in the next video,

227
00:13:03,160 --> 00:13:07,440
we are going to discuss the scrolling part

228
00:13:03,160 --> 00:13:07,440
as to how we are going to scroll down

229
00:13:07,450 --> 00:13:17,230
the profile with code and I hope

230
00:13:07,450 --> 00:13:17,230
this is clear to you as to why we have

231
00:13:17,230 --> 00:13:24,900
this number here and the ideology behind

232
00:13:17,230 --> 00:13:24,900
all of this, as to how we're scraping this

233
00:13:24,940 --> 00:13:30,070
and the reason we have to scroll

234
00:13:24,940 --> 00:13:30,070
down to find out all image links.

235
00:13:30,070 --> 00:13:31,490
I hope this makes sense.

236
00:13:31,560 --> 00:13:32,240
Thank you.

237
00:13:32,240 --> 00:13:33,180
I'll see you, in the next video.

