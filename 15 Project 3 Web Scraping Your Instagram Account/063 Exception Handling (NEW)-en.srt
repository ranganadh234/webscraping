1
00:00:00,560 --> 00:00:08,080
Hello everyone. In this video, we are going to discuss

2
00:00:00,560 --> 00:00:08,080
how we're going to add exception handling to our code.

3
00:00:08,100 --> 00:00:15,150
The first thing is why do we need to add exception

4
00:00:08,100 --> 00:00:15,150
handling to our code. Now things change with time.

5
00:00:15,180 --> 00:00:17,090
I have Instagram here.

6
00:00:17,100 --> 00:00:22,380
What they're going to do is maybe moving forward,

7
00:00:17,100 --> 00:00:22,380
they're going to change the layout of their

8
00:00:22,380 --> 00:00:23,190
log in page.

9
00:00:23,190 --> 00:00:25,230
That is very much possible.

10
00:00:25,230 --> 00:00:30,000
So when they do that the script is going to crash down

11
00:00:25,230 --> 00:00:30,000
and you'll have no clue what happened and of course

12
00:00:30,010 --> 00:00:31,060
you debug.

13
00:00:31,440 --> 00:00:32,210
So what do you do

14
00:00:32,200 --> 00:00:38,280
is you make sure that the application doesn't crash

15
00:00:32,200 --> 00:00:38,280
and you have "try catch" blocks to catch

16
00:00:38,340 --> 00:00:45,660
every exception that is being raised by

17
00:00:38,340 --> 00:00:45,660
some particular line of code which went wrong.

18
00:00:45,930 --> 00:00:52,570
So you should add exception handling in all

19
00:00:45,930 --> 00:00:52,570
your code so that your code exits gracefully. OK.

20
00:00:53,780 --> 00:00:59,620
Let's start with the first function we have which

21
00:00:53,780 --> 00:00:59,620
is the "og_in" function. The first thing which

22
00:00:59,870 --> 00:01:05,090
can go wrong here is that we

23
00:00:59,870 --> 00:01:05,090
are unable to find the log in button.

24
00:01:05,450 --> 00:01:10,750
So when that happens what we can do is we

25
00:01:05,450 --> 00:01:10,750
can have this in a "try catch" block. I say "try",

26
00:01:15,130 --> 00:01:16,600
"except Exception",

27
00:01:20,810 --> 00:01:22,760
let's write print here.

28
00:01:22,810 --> 00:01:26,530
"Unable to find login button".

29
00:01:26,680 --> 00:01:36,180
Ok, so before I move forward with this, I'm declaring

30
00:01:26,680 --> 00:01:36,180
a variable here, "self.error" is equals to

31
00:01:36,200 --> 00:01:42,030
"False" which indicates there driver now there is no error in our code.

32
00:01:42,320 --> 00:01:49,730
Whenever an exception is raised we can set

33
00:01:42,320 --> 00:01:49,730
this variable to "True" which means that some error

34
00:01:49,730 --> 00:01:52,250
has occurred and we can't move forward.

35
00:01:52,450 --> 00:01:53,050
OK.

36
00:01:53,420 --> 00:01:57,760
So now this XPath I have, this works.

37
00:01:57,830 --> 00:02:03,640
Let's just change. Let's say instead of "p", I make it "a".

38
00:02:03,860 --> 00:02:04,530
OK.

39
00:02:04,880 --> 00:02:06,830
And I comment this line.

40
00:02:06,980 --> 00:02:07,820
Let's run this

41
00:02:07,860 --> 00:02:13,050
and see if our code exit gracefully.

42
00:02:13,170 --> 00:02:14,010
But right now,

43
00:02:14,010 --> 00:02:14,560
OK,

44
00:02:14,640 --> 00:02:19,580
Before I actually run this, let's just

45
00:02:14,640 --> 00:02:19,580
have a dride through this code.

46
00:02:19,600 --> 00:02:22,540
But what's going to happen is it's going to come to the constructor.

47
00:02:22,530 --> 00:02:23,940
It's going to set the values.

48
00:02:24,120 --> 00:02:25,790
So "self.error" is equals to "False".

49
00:02:25,800 --> 00:02:32,340
And then moving forward, it gets Instagram URL then

50
00:02:25,800 --> 00:02:32,340
it goes to "log_in" function and once we're

51
00:02:32,340 --> 00:02:39,750
there, this line raises an exception which says

52
00:02:32,340 --> 00:02:39,750
that it is unable to find this element, this "a" tag we know

53
00:02:39,750 --> 00:02:42,890
doesn't exist because it's a "p" tag and not an "a" tag.

54
00:02:43,100 --> 00:02:45,570
So it comes here it says "self.error" is equals to "True".

55
00:02:45,570 --> 00:02:48,570
It says print "Unable to find the login button".

56
00:02:48,810 --> 00:02:56,130
So then it moves back and it says "close_dialog_box".

57
00:02:48,810 --> 00:02:56,130
When it's going to come down here you see that

58
00:02:56,160 --> 00:02:58,420
we already have this in a "try catch" block.

59
00:02:58,640 --> 00:03:04,470
And the reason for that was that for some of you,

60
00:02:58,640 --> 00:03:04,470
you might not be experiencing the dialog

61
00:03:04,470 --> 00:03:05,990
box issue at all.

62
00:03:06,300 --> 00:03:09,480
So, OK, we are going to pass the dialog box.

63
00:03:09,520 --> 00:03:11,580
We are not going to face the issues there.

64
00:03:11,580 --> 00:03:18,570
So when OK when we get to this function here, "open_target_profile",

65
00:03:11,580 --> 00:03:18,570
what's going to happen next is that there

66
00:03:18,570 --> 00:03:20,760
is that there is no "try catch" block here.

67
00:03:21,080 --> 00:03:23,970
It is not going to find this element.

68
00:03:24,120 --> 00:03:30,000
This "find_element_by_xpath" even though exist, it only

69
00:03:24,120 --> 00:03:30,000
exists if you are log been, we weren't logged in

70
00:03:30,030 --> 00:03:33,470
because we weren't able to find the log in button in the first place.

71
00:03:33,480 --> 00:03:34,560
So what do I do.

72
00:03:34,560 --> 00:03:39,680
Like what can we do to make sure that this isn't called.

73
00:03:39,750 --> 00:03:45,760
This is the reason that we declared this variable

74
00:03:39,750 --> 00:03:45,760
here, "self.error" is equals to "False".

75
00:03:45,780 --> 00:03:54,770
So I say if "self.error" is "False", only then you do this stuff. OK.

76
00:03:55,220 --> 00:03:58,150
And same goes for scrolling down.

77
00:03:58,160 --> 00:04:01,310
So "self.error" is "False"

78
00:04:01,460 --> 00:04:03,330
then you do this.

79
00:04:03,570 --> 00:04:09,650
Now you might be wondering why

80
00:04:03,570 --> 00:04:09,650
haven't I copy pasted this here,

81
00:04:09,720 --> 00:04:12,120
"self.open_target_profile",

82
00:04:12,150 --> 00:04:16,270
and why do I have a separate condition for this.

83
00:04:16,290 --> 00:04:23,550
The reason behind that is say some issues raise

84
00:04:16,290 --> 00:04:23,550
in "open_target_profile", maybe I am unable to find the search

85
00:04:23,550 --> 00:04:23,970
bar.

86
00:04:24,000 --> 00:04:24,290
OK.

87
00:04:24,300 --> 00:04:25,050
That's an error

88
00:04:25,050 --> 00:04:31,710
now. Obviously I'm in my news feed if

89
00:04:25,050 --> 00:04:31,710
I haven't opened my target's profile.

90
00:04:31,940 --> 00:04:34,110
So I'm right now on my news feed.

91
00:04:34,110 --> 00:04:41,160
So what happens then is that the scrolling function

92
00:04:34,110 --> 00:04:41,160
is going to be called and it is going to be called on

93
00:04:41,280 --> 00:04:46,680
the news feed, this is not going to find the number of

94
00:04:41,280 --> 00:04:46,680
posts because there aren't number of sports in news

95
00:04:46,700 --> 00:04:51,780
feed. I mean you can just scroll endlessly on your news feed.

96
00:04:51,870 --> 00:04:56,080
So that is going to raise an exception

97
00:04:51,870 --> 00:04:56,080
and your code is going to crash down.

98
00:04:56,100 --> 00:05:00,030
So that's why a separate "if" condition for this here.

99
00:05:00,220 --> 00:05:03,450
Ok, let's run this and see what happens.

100
00:05:03,460 --> 00:05:03,780
OK,

101
00:05:10,000 --> 00:05:10,840
so here we go.

102
00:05:10,840 --> 00:05:12,280
It's opening Instagram.

103
00:05:22,620 --> 00:05:24,550
It says "Unable to find login button".

104
00:05:24,590 --> 00:05:27,460
So the "stop for now", it's an input tag

105
00:05:27,640 --> 00:05:32,710
which I have here just to stop the code execution.

106
00:05:33,210 --> 00:05:36,830
I press Enter and it exits gracefully.

107
00:05:36,860 --> 00:05:43,910
OK, so let's complete our exception handling. So now

108
00:05:36,860 --> 00:05:43,910
I just gave you an introduction as to how

109
00:05:43,910 --> 00:05:46,360
this process is going to work.

110
00:05:46,380 --> 00:05:55,000
Now let's assume that there was no

111
00:05:46,380 --> 00:05:55,000
error at line number 69, the line we are

112
00:05:55,010 --> 00:06:01,900
trying to find the log in button which I've just highlighted.

113
00:05:55,010 --> 00:06:01,900
What I'm unable to find is a user name input,

114
00:06:01,900 --> 00:06:04,240
this element which I'm trying to find.

115
00:06:04,240 --> 00:06:05,550
What happens then.

116
00:06:05,800 --> 00:06:10,580
Obviously it's not "log_in_button" so

117
00:06:05,800 --> 00:06:10,580
I wouldn't know. If it is unable to find that, it

118
00:06:10,590 --> 00:06:14,740
is going to raise this exception "unable to find login button". OK.

119
00:06:14,750 --> 00:06:17,600
So what we do is we have this in another

120
00:06:23,230 --> 00:06:24,330
"try catch" block.

121
00:06:24,510 --> 00:06:26,480
OK.

122
00:06:26,700 --> 00:06:30,290
And the reason I have this like the

123
00:06:30,330 --> 00:06:37,320
password field and they user name field in a single "try

124
00:06:30,330 --> 00:06:37,320
catch" block is because I'm printing "Some exception

125
00:06:38,100 --> 00:06:38,760
occurred"...

126
00:06:41,800 --> 00:06:50,190
"Some exception occurred while trying

127
00:06:41,800 --> 00:06:50,190
to find user name or password field".

128
00:06:51,590 --> 00:06:56,680
If you want to be more precise, you can have "try catch"

129
00:06:51,590 --> 00:06:56,680
blocks separatedly for each of them so it is not going

130
00:06:56,690 --> 00:06:58,280
to change anything.

131
00:06:58,330 --> 00:07:07,310
And I say "self.error" is equals to "True". So that is

132
00:06:58,330 --> 00:07:07,310
exception handling for the "log_in" function. Moving

133
00:07:07,310 --> 00:07:10,870
forward we have "close_dialog_box".

134
00:07:11,250 --> 00:07:14,340
We have "try catch block".

135
00:07:14,360 --> 00:07:15,740
So there is no need for that.

136
00:07:15,740 --> 00:07:18,000
Let's go to "open_target_profile".

137
00:07:18,260 --> 00:07:18,480
OK.

138
00:07:18,500 --> 00:07:20,740
So what can raise an error here.

139
00:07:21,140 --> 00:07:26,920
This is what can raise an error like

140
00:07:21,140 --> 00:07:26,920
it is unable to find this element, the search bar.

141
00:07:27,200 --> 00:07:29,760
So let's have this in a "try catch" block.

142
00:07:30,020 --> 00:07:31,170
The whole of it.

143
00:07:31,360 --> 00:07:41,210
I say "except Exception" and I say

144
00:07:31,360 --> 00:07:41,210
"self.error" is equals to "True".

145
00:07:41,390 --> 00:07:46,550
And print "Could not find search bar".

146
00:07:49,320 --> 00:07:50,770
Ok, so moving next.

147
00:07:50,770 --> 00:07:53,550
What do we have scrolling down.

148
00:07:55,380 --> 00:08:01,920
Ok, so when it come to this function here, you can

149
00:07:55,380 --> 00:08:01,920
see that this is the thing we're trying to

150
00:08:01,920 --> 00:08:04,500
find first find element by XPath.

151
00:08:04,500 --> 00:08:09,010
This is the element which gives us the

152
00:08:04,500 --> 00:08:09,010
number of posts for a particular profile.

153
00:08:09,270 --> 00:08:12,770
So that is one which is going to raise the first exception.

154
00:08:12,780 --> 00:08:12,990
OK.

155
00:08:12,990 --> 00:08:16,500
So let's have this whole in a single "try catch"

156
00:08:16,540 --> 00:08:16,880
block.

157
00:08:20,380 --> 00:08:33,110
I say "except Exception" and I say print "Could not find

158
00:08:20,380 --> 00:08:33,110
numbers of posts while trying to scroll down". And I say "self.error"

159
00:08:33,320 --> 00:08:43,900
is equals to "True". OK, so the next thing which can

160
00:08:33,320 --> 00:08:43,900
go wrong is that by just trying to scroll down something

161
00:08:43,900 --> 00:08:44,760
goes wrong.

162
00:08:44,770 --> 00:08:45,910
Right.

163
00:08:46,060 --> 00:08:55,460
So now it's basically up to you if you want to have

164
00:08:46,060 --> 00:08:55,460
this in a single loop like in a single "try catch"

165
00:08:55,460 --> 00:08:56,340
block the whole loop.

166
00:08:56,360 --> 00:08:59,310
Or you can have the "try catch" block in the loop.

167
00:08:59,660 --> 00:09:02,820
Ok, so I say "self.error"

168
00:09:06,270 --> 00:09:07,710
is equals to "True".

169
00:09:08,890 --> 00:09:17,280
print "Some occurred while trying to scroll down".

170
00:09:20,160 --> 00:09:26,600
OK, so now if you want to see what exceptional occurred

171
00:09:20,160 --> 00:09:26,600
what we can do is you can say "except Exception as e"

172
00:09:26,970 --> 00:09:29,340
and you can print it, print "e".

173
00:09:29,610 --> 00:09:31,450
This is also going to the print exception.

174
00:09:31,470 --> 00:09:35,250
And it is not going to force the code to close down.

175
00:09:35,250 --> 00:09:42,690
So you'll see the stack trace like what caused the error

176
00:09:35,250 --> 00:09:42,690
and your code is going to exit gracefully this

177
00:09:42,690 --> 00:09:48,040
way. OK, so now we have done this

178
00:09:42,690 --> 00:09:48,040
for scroll down and this is it.

179
00:09:48,160 --> 00:09:48,910
OK.

180
00:09:48,910 --> 00:09:55,180
So for now, for this video what we did was we introduced

181
00:09:48,910 --> 00:09:55,180
exception handling to each of the functions

182
00:09:55,180 --> 00:09:57,150
we have written for this class.

183
00:09:57,250 --> 00:10:03,220
And the reason behind that was to make sure that our

184
00:09:57,250 --> 00:10:03,220
code exits gracefully if there is any change in

185
00:10:03,220 --> 00:10:09,780
the structure of Instagram's website and I

186
00:10:03,220 --> 00:10:09,780
hope this made sense. In the next video,

187
00:10:09,780 --> 00:10:16,690
we're going to continue to how we are going to download

188
00:10:09,780 --> 00:10:16,690
the images from my target's profile as you scroll down.

189
00:10:16,690 --> 00:10:17,530
Thank you very much.

190
00:10:17,530 --> 00:10:19,400
I hope this makes sense. Thank you.

